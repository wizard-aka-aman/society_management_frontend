<!-- Responsive Sidebar Wrapper --><!-- Top Navbar (toggle only on small screens) -->
<nav class="navbar navbar-dark bg-dark d-lg-none">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">Unity Circle</a>
    <button
      class="navbar-toggler"
      type="button"
      (click)="SideBar()"
      id="sidebarToggle"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<!-- Sidebar Component -->
<div id="sidebar" class="sidebar bg-dark text-white p-3">
  <a
    href="/"
    class="d-flex align-items-center mb-3 text-white text-decoration-none"
  >
    <svg class="bi me-2" width="40" height="32">
      <use xlink:href="#bootstrap"></use>
    </svg>
    <span class="fs-4">Unity Circle</span>
  </a>
  <hr />
  <ul class="nav nav-pills flex-column mb-auto" id="sidebarItems">
    <li>
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="home"
        class="nav-link active text-white"
        >Home</a
      >
    </li>
    <li>
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="bills"
        class="nav-link text-white"
        >Bills</a
      >
    </li>
    <li>
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="complaints"
        class="nav-link text-white"
        >Complaints</a
      >
    </li>
    <li>
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="bookings"
        class="nav-link text-white"
        >Bookings</a
      >
    </li>
    <li>
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="notices"
        class="nav-link text-white"
        >Notices</a
      >
    </li>
    <li>
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="visitors"
        class="nav-link text-white"
        >Visitors</a
      >
    </li>
    <li *ngIf="Role == 'Admin'">
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="flats"
        class="nav-link text-white"
        >Manage Flats</a
      >
    </li>
    <li *ngIf="Role == 'Admin'">
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="register"
        class="nav-link text-white"
        >Add User
      </a>
    </li>
    <li *ngIf="Role == 'Admin'">
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="manage-users"
        class="nav-link text-white"
        >Manage Users
      </a>
    </li>
    <li *ngIf="Role == 'Admin'">
      <a
        routerLinkActive="active"
        (click)="SideBar()"
        routerLink="registerAdmin"
        class="nav-link text-white"
        >Add Admin
      </a>
    </li>
  </ul>
  <hr />
  <div class="dropdown">
    <a
      href="#"
      class="d-flex justify-content-center align-items-center text-white text-decoration-none dropdown-toggle"
      id="dropdownUser"
      data-bs-toggle="dropdown"
      aria-expanded="false"
    >
      <!-- <img src="https://github.com/mdo.png" alt="" width="32" height="32" class="rounded-circle me-2"> -->
      <strong>Wellcome, {{ userName }}</strong>
    </a>
    <ul
      class="dropdown-menu dropdown-menu-dark text-small shadow"
      aria-labelledby="dropdownUser"
    >
      <li>
        <a
          class="dropdown-item"
          data-bs-toggle="modal"
          data-bs-target="#profileModal"
          href="#"
          >Profile</a
        >
      </li>
      <li><hr class="dropdown-divider" /></li>
      <li><a class="dropdown-item" (click)="onLogout()">Logout</a></li>
    </ul>
  </div>
</div>

<!-- Modal -->
<div
  class="modal fade"
  id="profileModal"
  tabindex="-1"
  aria-labelledby="profileModalLabel"
  aria-hidden="true"
>
  <div class="modal-dialog modal-dialog-centered modal-lg">
    <div class="modal-content shadow">
      <div class="modal-header bg-primary text-white">
        <h5 class="modal-title" id="profileModalLabel">User Profile</h5>
        <button
          type="button"
          class="btn-close btn-close-white"
          data-bs-dismiss="modal"
          aria-label="Close"
        ></button>
      </div>
      <div class="modal-body p-4">
        <div class="row g-4">
          <div class="col-md-6">
            <div class="card shadow-sm border-0">
              <div class="card-body">
                <h6 class="card-title text-primary">Personal Info</h6>
                <p class="mb-1"><strong>Name:</strong> {{ userName }}</p>
                <p class="mb-0"><strong>Email:</strong> {{ profileEmail }}</p>
              </div>
            </div>
          </div>

          <div class="col-md-6">
            <div class="card shadow-sm border-0">
              @if(flatProfile.length == 0){
              <div class="card-body">
                <h6 class="card-title text-success">Flat Info</h6>
                <p>Not Accocated Flat</p>
              </div>

              } @else {
              <div class="card-body">
                <h6 class="card-title text-success">Flat Info</h6>
                @if(flatProfile != undefined){
                <p class="mb-1">
                  <strong>Block:</strong> {{ flatProfile[0]?.block }}
                </p>
                <p class="mb-1">
                  <strong>Flat Number:</strong> {{ flatProfile[0]?.flatNumber }}
                </p>
                <p class="mb-1">
                  <strong>Floor:</strong> {{ flatProfile[0]?.floorNumber }}
                </p>
                }
              </div>
              }
            </div>
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
      </div>
    </div>
  </div>
</div>

<router-outlet></router-outlet>
